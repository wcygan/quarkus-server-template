# Quarkus Application Configuration

# Application Information
quarkus.application.name=user-api
quarkus.application.version=1.0.0-SNAPSHOT

# HTTP Configuration
quarkus.http.port=8080
quarkus.http.test-port=8081

# Development Configuration
quarkus.live-reload.instrumentation=true

# Health Check Configuration
quarkus.smallrye-health.ui.enable=true

# Logging Configuration
quarkus.log.level=INFO
quarkus.log.category."com.example".level=DEBUG
quarkus.log.console.enable=true
quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n

# Development Logging (more verbose)
%dev.quarkus.log.level=DEBUG
%dev.quarkus.log.category."com.example".level=DEBUG
%dev.quarkus.log.category."org.jooq".level=DEBUG
%dev.quarkus.log.category."org.flywaydb".level=INFO
%dev.quarkus.log.category."com.mysql.cj".level=WARN

# Database Configuration
%dev.quarkus.datasource.db-kind=mysql
%dev.quarkus.datasource.username=userapi
%dev.quarkus.datasource.password=userapi
%dev.quarkus.datasource.jdbc.url=jdbc:mysql://localhost:3306/userapi

# Production Database Configuration (override in production)
%prod.quarkus.datasource.db-kind=mysql
%prod.quarkus.datasource.username=${DB_USERNAME:userapi}
%prod.quarkus.datasource.password=${DB_PASSWORD:userapi}
%prod.quarkus.datasource.jdbc.url=${DB_URL:jdbc:mysql://localhost:3306/userapi}

# Test Database Configuration (MySQL TestContainers - disabled by default)
# Tests that need database should use @QuarkusTest with TestContainers
%test.quarkus.datasource.jdbc=false

# Flyway Configuration
quarkus.flyway.migrate-at-start=true
quarkus.flyway.locations=classpath:db/migration
quarkus.flyway.baseline-on-migrate=true
quarkus.flyway.baseline-version=1.0.0

# Development Flyway Settings (more aggressive)
%dev.quarkus.flyway.clean-at-start=false
%dev.quarkus.flyway.migrate-at-start=true

# Test Flyway Settings
%test.quarkus.flyway.clean-at-start=true
%test.quarkus.flyway.migrate-at-start=true

# Production Flyway Settings (conservative)
%prod.quarkus.flyway.clean-at-start=false
%prod.quarkus.flyway.migrate-at-start=false

# Connection Pool Configuration
quarkus.datasource.jdbc.min-size=5
quarkus.datasource.jdbc.max-size=20
quarkus.datasource.jdbc.acquisition-timeout=10S

# Native Image Configuration
quarkus.native.resources.includes=db/migration/*

# OpenAPI/Swagger Configuration (requires quarkus-smallrye-openapi extension)
# quarkus.swagger-ui.always-include=true
# quarkus.swagger-ui.path=/swagger-ui

# CORS Configuration for development
%dev.quarkus.http.cors=true
%dev.quarkus.http.cors.origins=http://localhost:3000,http://localhost:8080
%dev.quarkus.http.cors.methods=GET,PUT,POST,DELETE,OPTIONS
%dev.quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with

# Jackson Configuration
quarkus.jackson.fail-on-unknown-properties=false
quarkus.jackson.write-dates-as-timestamps=false

# Validation Configuration
quarkus.hibernate-validator.fail-fast=false

# Build time configuration
quarkus.package.jar.type=uber-jar